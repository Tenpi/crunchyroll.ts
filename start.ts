import crunchyroll from "./crunchyroll"

(async () => {
    const progress = (progress) => {
        if (progress.percent > 10) return "stop"
    }
    const subtitles = "https://v.vrv.co/evs/c9082de6e4f2805403bc9a140935aa68/assets/ad70a887b6f91211cd547ff8b100f4de_159143.txt?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cCo6Ly92LnZydi5jby9ldnMvYzkwODJkZTZlNGYyODA1NDAzYmM5YTE0MDkzNWFhNjgvYXNzZXRzL2FkNzBhODg3YjZmOTEyMTFjZDU0N2ZmOGIxMDBmNGRlXzE1OTE0My50eHQiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2MTM4NDIzMzB9fX1dfQ__&Signature=iGizyNfA6mcg8o26JDGGaRCPOcSbcg9bMzGLsEU3RR3XpE~5Y15rNc4AeZa-7zO6KHPoIMimHPLrIwRteaaqUIp2itiSWGFM-BJMawnAuIhMKM5GqgxEV14az3LxJTiGwXErTfGkXGiLPDitl8fcQUkPc90a3fUW6IX6ysEPULb6uFwctrEXc9aV3hJKke93x5lmoL1Z0lyHJUk7z2Tm7G4a82CnvGPMsc59R3perZCD9uMnJCYFbCJJdnW~JNOBuAG5Njg5XizXSowxSrJkPbVthHWXkLpOGM-FZJpy77YeP1Lka9SWtK2iqB2hxHgBsNjR1uU0OdVm6bmbFDsdSQ__&Key-Pair-Id=APKAJMWSQ5S7ZB3MF5VA"
    const playlist = "https://pl.crunchyroll.com/evs1/c9082de6e4f2805403bc9a140935aa68/assets/ad70a887b6f91211cd547ff8b100f4de_,3165989.mp4,3165991.mp4,3165987.mp4,3165983.mp4,3165985.mp4,.urlset/master.m3u8?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cCo6Ly9wbC5jcnVuY2h5cm9sbC5jb20vZXZzMS9jOTA4MmRlNmU0ZjI4MDU0MDNiYzlhMTQwOTM1YWE2OC9hc3NldHMvYWQ3MGE4ODdiNmY5MTIxMWNkNTQ3ZmY4YjEwMGY0ZGVfLDMxNjU5ODkubXA0LDMxNjU5OTEubXA0LDMxNjU5ODcubXA0LDMxNjU5ODMubXA0LDMxNjU5ODUubXA0LC51cmxzZXQvbWFzdGVyLm0zdTgiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2MTM4NDIzMzB9fX1dfQ__&Signature=ZyZN2sHXNa5DaIUeUENFWYALlDqX9otHkCGRYu04z1rrCfBdL4sM2czWUrE3S~HrTD3bsqX9p9vzKwKnirhmSldttfHed7lBSstzmpJiTMmLHQ50Yvn-5PSU7~rWRAkHPb2t3fXMzz9ARNoCjHAdFRS85SCGN64QWPbwwovoMJZBt3EPKJxTlPq07GtiutP8OCWzaxKQ2QdzD5LWrvJbM-n4CB0GR6h4AeGw7~jVWNE-c4wD6hSUUkkjpHuQ~aUIZuEkLDLwqjqFGU2NhyRTR20fhflbY25QE4AUrGiZ8Pvad89SYgKTDze8Vd9uWGvhFd~PdGH5hOF5mt~8Gn9A5g__&Key-Pair-Id=APKAJMWSQ5S7ZB3MF5VA"
    const output = await crunchyroll.util.downloadEpisode("https://www.crunchyroll.com/gabriel-dropout/episode-11-fun-forever-after-727505", "./videos", {softSubs: true, playlist, subtitles}, progress)
    console.log(output)
})()
